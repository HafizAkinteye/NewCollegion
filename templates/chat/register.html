{% extends 'chat/index.html' %}
{% block form %}
    <h3>
    Register
    </h3>
    {% csrf_token %}
    <form id="register-form" method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <p>
            <label for="id_password_confirm" class="active">Confirm Password:</label>
            <input type="password" name="password_confirm" maxlength="128" required="" id="id_password_confirm">
        </p>
        <div class="row">
            <div class="col s12">
            <div class="right">
                <button type="submit" class="btn blue waves-effect waves-light pull-s12">Register</button>
            </div>
        </div>
    </form>
    <script>
    $(function () {
        $('#register-form').on('submit', function (event) {
            event.preventDefault();
            var username = $('#id_username').val();
            var email = $('#id_email').val();
            if(username !== '')
            {
                var password = $('#id_password').val();
                if(password !== '' && password === $('#id_password_confirm').val()){
                    register(username, email, password);
                }
                else{
                    alert("The passwords doesn't match!");
                }
            }
            else
                alert("Please enter a valid username!");
        })
    })
    </script>
{% endblock %}
